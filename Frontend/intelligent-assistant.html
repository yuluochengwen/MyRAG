<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ™ºèƒ½åŠ©æ‰‹ç®¡ç† - RAGFlow.ai</title>
  <!-- å¼•å…¥Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- å¼•å…¥Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- å¼•å…¥è‡ªå®šä¹‰æ ·å¼ -->
  <link rel="stylesheet" href="css/intelligent-assistant.css">
  
  <!-- Tailwindé…ç½® -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#69B1FF',
            accent: '#36CFC9',
            dark: '#1D2129',
            light: '#F2F3F5',
            danger: '#F53F3F',
            warning: '#FF7D00',
            success: '#00B42A'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
</head>
<body class="font-inter bg-gray-50 text-dark min-h-screen flex flex-col">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <header class="bg-white shadow-sm sticky top-0 z-50">
    <div class="container mx-auto px-4">
      <div class="flex justify-between items-center py-4">
        <!-- Logo -->
        <div class="flex items-center space-x-2">
          <div class="w-10 h-10 rounded-lg bg-primary flex items-center justify-center">
            <i class="fa fa-link text-white text-xl"></i>
          </div>
          <span class="text-xl font-bold text-primary">RAGFlow<span class="text-dark">.ai</span></span>
        </div>
        
        <!-- å¯¼èˆªé“¾æ¥ - æ¡Œé¢ç‰ˆ -->
        <nav class="hidden md:flex items-center space-x-1">
          <a href="knowledge-base.html" class="nav-link px-4 py-2 font-medium border-b-2 border-transparent hover:border-primary hover:text-primary transition-custom">çŸ¥è¯†åº“</a>
          <a href="intelligent-assistant.html" class="nav-link nav-active px-4 py-2 font-medium border-b-2 transition-custom">æ™ºèƒ½åŠ©æ‰‹</a>
          <a href="agent.html" class="nav-link px-4 py-2 font-medium border-b-2 border-transparent hover:border-primary hover:text-primary transition-custom">Agent</a>
          <a href="model-management.html" class="nav-link px-4 py-2 font-medium border-b-2 border-transparent hover:border-primary hover:text-primary transition-custom">æ¨¡å‹ç®¡ç†</a>
        </nav>
        
        <!-- ç”¨æˆ·åŒºåŸŸ -->
        <div class="flex items-center space-x-4">
          <button class="p-2 rounded-full hover:bg-gray-100 transition-custom relative">
            <i class="fa fa-bell-o text-gray-600"></i>
            <span class="absolute top-1 right-1 w-2 h-2 bg-danger rounded-full"></span>
          </button>
          <div class="flex items-center space-x-2">
            <img src="https://picsum.photos/id/1005/40/40" alt="ç”¨æˆ·å¤´åƒ" class="w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm">
            <span class="hidden md:inline font-medium">ç®¡ç†å‘˜</span>
          </div>
          <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
          <button class="md:hidden p-2 rounded-md hover:bg-gray-100 transition-custom" id="mobile-menu-btn">
            <i class="fa fa-bars text-gray-600"></i>
          </button>
        </div>
      </div>
      
      <!-- ç§»åŠ¨ç«¯å¯¼èˆªèœå• -->
      <div class="md:hidden hidden pb-4" id="mobile-menu">
        <nav class="flex flex-col space-y-2">
          <a href="knowledge-base.html" class="mobile-nav-link px-4 py-3 font-medium hover:bg-gray-100 rounded-lg transition-custom">çŸ¥è¯†åº“</a>
          <a href="intelligent-assistant.html" class="mobile-nav-link nav-active px-4 py-3 font-medium bg-primary/5 rounded-lg text-primary transition-custom">æ™ºèƒ½åŠ©æ‰‹</a>
          <a href="agent.html" class="mobile-nav-link px-4 py-3 font-medium hover:bg-gray-100 rounded-lg transition-custom">Agent</a>
          <a href="model-management.html" class="mobile-nav-link px-4 py-3 font-medium hover:bg-gray-100 rounded-lg transition-custom">æ¨¡å‹ç®¡ç†</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- ä¸»å†…å®¹åŒºåŸŸ -->
  <main class="flex-grow container mx-auto px-4 py-6">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold">æ™ºèƒ½åŠ©æ‰‹ç®¡ç†</h1>
      <div class="flex space-x-3">
        <div class="relative">
          <input type="text" id="assistantSearchInput" placeholder="æœç´¢æ™ºèƒ½åŠ©æ‰‹..." class="pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary w-full md:w-64 transition-custom">
          <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
        </div>
        <button class="btn-filter px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-custom">
          <i class="fa fa-filter mr-2 text-gray-600"></i>
          <span class="hidden md:inline">ç­›é€‰</span>
        </button>
      </div>
    </div>
    
    <!-- æ™ºèƒ½åŠ©æ‰‹å¡ç‰‡ç½‘æ ¼ -->
    <div id="assistantsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- ç”±JavaScriptåŠ¨æ€æ¸²æŸ“ -->
    </div>
  </main>

  <!-- åˆ›å»ºåŠ©æ‰‹æ¨¡æ€æ¡† -->
  <div id="createAssistantModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
      <div class="p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10">
        <h2 class="text-2xl font-bold">åˆ›å»ºæ™ºèƒ½åŠ©æ‰‹</h2>
        <button id="closeModal" class="text-gray-400 hover:text-gray-600">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      
      <form id="createAssistantForm" class="p-6">
        <!-- ä½¿ç”¨ä¸¤åˆ—å¸ƒå±€èŠ‚çœç©ºé—´ -->
        <div class="grid grid-cols-2 gap-4 mb-4">
          <!-- å·¦åˆ— -->
          <div class="space-y-4">
            <!-- åŸºæœ¬ä¿¡æ¯ -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">åŠ©æ‰‹åç§° *</label>
              <input type="text" name="name" required 
                     class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
                     placeholder="ä¾‹å¦‚ï¼šäº§å“é¡¾é—®">
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">æè¿°</label>
              <textarea name="description" rows="2"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
                        placeholder="ç®€è¦æè¿°åŠŸèƒ½"></textarea>
            </div>
            
            <!-- çŸ¥è¯†åº“é€‰æ‹© -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">å…³è”çŸ¥è¯†åº“</label>
              <select id="kbSelect" name="kb_id"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                <option value="">ä¸ç»‘å®šçŸ¥è¯†åº“</option>
              </select>
            </div>
            
            <!-- åµŒå…¥æ¨¡å‹ -->
            <div id="embeddingModelGroup">
              <label class="block text-sm font-medium text-gray-700 mb-1">åµŒå…¥æ¨¡å‹ *</label>
              <select id="embeddingModelSelect" name="embedding_model"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                <option value="">é€‰æ‹©åµŒå…¥æ¨¡å‹</option>
              </select>
            </div>
          </div>
          
          <!-- å³åˆ— -->
          <div class="space-y-4">
            <!-- LLMæ¨¡å‹ -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">LLMæ¨¡å‹ *</label>
              <select id="llmModelSelect" name="llm_model" required
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                <option value="">é€‰æ‹©LLMæ¨¡å‹</option>
              </select>
            </div>
            
            <!-- æç¤ºè¯æ¨¡æ¿ -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">æç¤ºè¯æ¨¡æ¿</label>
              <select id="promptTemplateSelect"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                <option value="">é€‰æ‹©æ¨¡æ¿(å¯é€‰)</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">ç³»ç»Ÿæç¤ºè¯</label>
              <textarea id="systemPrompt" name="system_prompt" rows="4"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
                        placeholder="å®šä¹‰åŠ©æ‰‹è§’è‰²..."></textarea>
            </div>
            
            <!-- é…è‰²ä¸»é¢˜ -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">å¡ç‰‡é…è‰²</label>
              <div class="flex gap-2">
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="blue" checked class="mr-1">
                  <span class="w-6 h-6 rounded bg-blue-100 border-2 border-blue-300"></span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="purple" class="mr-1">
                  <span class="w-6 h-6 rounded bg-purple-100 border-2 border-purple-300"></span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="orange" class="mr-1">
                  <span class="w-6 h-6 rounded bg-orange-100 border-2 border-orange-300"></span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="green" class="mr-1">
                  <span class="w-6 h-6 rounded bg-green-100 border-2 border-green-300"></span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="pink" class="mr-1">
                  <span class="w-6 h-6 rounded bg-pink-100 border-2 border-pink-300"></span>
                </label>
              </div>
            </div>
          </div>
        </div>
        
        <!-- æŒ‰é’®ç»„ -->
        <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
          <button type="button" id="cancelCreate"
                  class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
            å–æ¶ˆ
          </button>
          <button type="submit"
                  class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90">
            åˆ›å»ºåŠ©æ‰‹
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ç¼–è¾‘åŠ©æ‰‹æ¨¡æ€æ¡† -->
  <div id="editAssistantModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
      <div class="p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10">
        <h2 class="text-2xl font-bold">ç¼–è¾‘æ™ºèƒ½åŠ©æ‰‹</h2>
        <button id="closeEditModal" class="text-gray-400 hover:text-gray-600">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      
      <form id="editAssistantForm" class="p-6">
        <input type="hidden" id="editAssistantId" name="id">
        
        <!-- ä½¿ç”¨ä¸¤åˆ—å¸ƒå±€èŠ‚çœç©ºé—´ -->
        <div class="grid grid-cols-2 gap-4 mb-4">
          <!-- å·¦åˆ— -->
          <div class="space-y-4">
            <!-- åŸºæœ¬ä¿¡æ¯ -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">åŠ©æ‰‹åç§° *</label>
              <input type="text" id="editName" name="name" required 
                     class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
                     placeholder="ä¾‹å¦‚ï¼šäº§å“é¡¾é—®">
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">æè¿°</label>
              <textarea id="editDescription" name="description" rows="2"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
                        placeholder="ç®€è¦æè¿°åŠŸèƒ½"></textarea>
            </div>
            
            <!-- çŸ¥è¯†åº“é€‰æ‹© -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">å…³è”çŸ¥è¯†åº“</label>
              <select id="editKbSelect" name="kb_id" multiple size="3"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
              </select>
              <p class="text-xs text-gray-500 mt-1">ğŸ’¡ Ctrl/Cmdå¤šé€‰</p>
            </div>
          </div>
          
          <!-- å³åˆ— -->
          <div class="space-y-4">
            <!-- LLMæ¨¡å‹ -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">LLMæ¨¡å‹ *</label>
              <select id="editLlmModelSelect" name="llm_model" required
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
              </select>
            </div>
            
            <!-- æç¤ºè¯æ¨¡æ¿ -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">æç¤ºè¯æ¨¡æ¿</label>
              <select id="editPromptTemplateSelect"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                <option value="">é€‰æ‹©æ¨¡æ¿(å¯é€‰)</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">ç³»ç»Ÿæç¤ºè¯</label>
              <textarea id="editSystemPrompt" name="system_prompt" rows="4"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
                        placeholder="å®šä¹‰åŠ©æ‰‹è§’è‰²..."></textarea>
            </div>
            
            <!-- é…è‰²ä¸»é¢˜ -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">å¡ç‰‡é…è‰²</label>
              <div class="flex gap-2">
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="blue" class="mr-1">
                  <span class="w-6 h-6 rounded bg-blue-100 border-2 border-blue-300"></span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="purple" class="mr-1">
                  <span class="w-6 h-6 rounded bg-purple-100 border-2 border-purple-300"></span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="orange" class="mr-1">
                  <span class="w-6 h-6 rounded bg-orange-100 border-2 border-orange-300"></span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="green" class="mr-1">
                  <span class="w-6 h-6 rounded bg-green-100 border-2 border-green-300"></span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="color_theme" value="pink" class="mr-1">
                  <span class="w-6 h-6 rounded bg-pink-100 border-2 border-pink-300"></span>
                </label>
              </div>
            </div>
          </div>
        </div>
        
        <!-- æŒ‰é’®ç»„ -->
        <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
          <button type="button" id="cancelEdit"
                  class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
            å–æ¶ˆ
          </button>
          <button type="submit"
                  class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90">
            ä¿å­˜ä¿®æ”¹
          </button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
    document.getElementById('mobile-menu-btn')?.addEventListener('click', function() {
      document.getElementById('mobile-menu').classList.toggle('hidden');
    });
  </script>
  
  <!-- å¼•å…¥é€šç”¨å·¥å…·å‡½æ•° -->
  <script src="js/common.js"></script>
  
  <!-- å¼•å…¥æ™ºèƒ½åŠ©æ‰‹é¡µé¢é€»è¾‘ -->
  <script src="js/intelligent-assistant.js"></script>
</body>
</html>
